generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Model for Cities
model City {
  id           Int           @id @default(autoincrement())
  name         String
  busTerminals BusTerminal[]
  routesStart  Route[]       @relation("StartCityRoutes")
  routesEnd    Route[]       @relation("EndCityRoutes")

  @@map("tbl_city")
}

// Model for Transportation Providers
model TransportationProvider {
  id          Int     @id @default(autoincrement())
  name        String
  contactInfo String? @map("contact_info")
  routes      Route[]

  @@map("tbl_transportation_provider")
}

// Model for Bus Terminals
model BusTerminal {
  id      Int    @id @default(autoincrement())
  citiId  Int    @map("city_id")
  name    String
  address String
  city    City   @relation(fields: [citiId], references: [id])

  @@map("tbl_bus_terminal")
}

// Model for Routes
model Route {
  id                       Int                     @id @default(autoincrement())
  startCityId              Int                     @map("start_city_id")
  endCityId                Int                     @map("end_city_id")
  distance                 Int
  estimatedTravelTime      Int                     @map("estimated_travel_time")
  transportationProviderId Int?                    @map("transportation_provider_id")
  startCity                City                    @relation("StartCityRoutes", fields: [startCityId], references: [id])
  endCity                  City                    @relation("EndCityRoutes", fields: [endCityId], references: [id])
  schedules                Schedule[]
  transportationProvider   TransportationProvider? @relation(fields: [transportationProviderId], references: [id])

  @@map("tbl_route")
}

// Model for Schedules
model Schedule {
  id            Int           @id @default(autoincrement())
  routeId       Int           @map("route_id")
  departureTime String        @map("departure_time")
  arrivalTime   String        @map("arrival_time")
  date          DateTime
  route         Route         @relation(fields: [routeId], references: [id])
  reservations  Reservation[]

  @@map("tbl_schedule")
}

// Model for Reservations
model Reservation {
  id           Int      @id @default(autoincrement())
  scheduleId   Int      @map("schedule_id")
  customerName String   @map("customer_name")
  contactInfo  String?  @map("contact_info")
  seatNumber   String   @map("seat_number")
  schedule     Schedule @relation(fields: [scheduleId], references: [id])

  @@map("tbl_reservation")
}
